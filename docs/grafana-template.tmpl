{{/*
  Grafana Notification Template for wacli WhatsApp Webhook
  
  ============================================================
  HOW TO USE:
  ============================================================
  1. In Grafana: Alerting → Contact Points → Notification Templates
  2. Click "Add template"
  3. Name: wacli-whatsapp
  4. Paste ONLY the content between the === markers below
  5. Save
  
  6. Then edit your Webhook Contact Point:
     URL:  http://wacli-api:8080/api/v1/webhook/grafana?to=5521998940168
     HTTP Method: POST
     Authorization Header → Credentials: XsVREsdriPvQG8BvyEW7WGdyb3FYQXh5NLhIQJPgw5h3UkMpuIbA
     
     Optional Settings:
       Title:   {{ template "wacli.title" . }}
       Message: (leave EMPTY — wacli formats it)
  ============================================================
  
  === COPY FROM HERE ===
*/}}

{{ define "wacli.title" -}}
[{{ .Status | toUpper }}:{{ if eq .Status "firing" }}{{ len .Alerts.Firing }}{{ else }}{{ len .Alerts.Resolved }}{{ end }}] {{ .CommonLabels.alertname }}
{{- end }}

{{/* === COPY UNTIL HERE === */}}
